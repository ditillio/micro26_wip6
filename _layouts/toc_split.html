<!doctype html>
<html lang="{{ page.lang | default: site.lang }}">
<head>
  <title>{{ page.title }}</title>
  {% include stylesheets.html KGversion="0.3.1" bootstrap=false textbook=true %}
  {% include favicons.html %}
  <link rel="stylesheet" href="{{ '/static/css/toc-accordion.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/static/css/toc-split.css' | relative_url }}">
</head>

<body>
{% assign _lang = page.lang | default: site.lang | default: 'it' %}
{% if page.url contains '/en/' %}{% assign _lang = 'en' %}{% endif %}
{% if page.url contains '/it/' %}{% assign _lang = 'it' %}{% endif %}
  <div class="toc-split">

    <!-- COLONNA SINISTRA: TOC (con banner in alto) -->
        <div class="toc-split-left">

          <!-- HEADER SIDEBAR: banner + titolo + autore (sempre visibile) -->
          <div class="sidebar-header" role="banner">
            <div class="sidebar-top-banner" aria-hidden="true">
              <img src="{{ '/assets/sidebar-banner.png' | relative_url }}" alt="Note di Microeconomia banner" />
            </div>

            <!-- se il titolo/author sono generati via content, puoi lasciare qui copia del titolo/author
                 oppure rimuovere se già presenti dentro {{ content }} -->
            <h1 class="sidebar-site-title">{{ page.title }}</h1>
            <div class="sidebar-author">Alfredo Di Tillio</div>

            <div class="sidebar-header-divider" aria-hidden="true"></div>
          </div>

          <!-- TOC scrollabile: tutto il contenuto scorre qui dentro -->
          <div class="toc-scroll" role="navigation" aria-label="Table of contents">
            {{ content }}
          </div>

        </div>

    <!-- COLONNA DESTRA: CONTENUTO -->
    <div class="toc-split-right">
    <span id="toc-sidebar-toggle" class="toc-sidebar-toggle" role="button" tabindex="0" aria-label="Mostra indice" title="Mostra indice">
      ☰
    </span>
    <span id="go-big-toc" class="go-big-toc" role="button" tabindex="0"
          aria-label="{% if _lang == 'en' %}Go to table of contents{% else %}Vai all'indice{% endif %}"
          title="{% if _lang == 'en' %}Go to table of contents{% else %}Vai all'indice{% endif %}">
      <svg class="go-big-toc-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M3 11.5L12 4l9 7.5M6.5 10.5V20h11V10.5" />
      </svg>
    </span>
    <span id="content-reload" class="content-reload" role="button" tabindex="0"
          aria-label="{% if _lang == 'en' %}Reload content{% else %}Ricarica pagina{% endif %}"
          title="{% if _lang == 'en' %}Reload content{% else %}Ricarica pagina{% endif %}">
      ↻
    </span>
    <span id="content-print" class="content-print" role="button" tabindex="0"
          aria-label="{% if _lang == 'en' %}Print this section{% else %}Stampa questa sezione{% endif %}"
          title="{% if _lang == 'en' %}Print this section{% else %}Stampa questa sezione{% endif %}">
      <svg class="content-print-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M7 8V4h10v4M7 17h10v3H7v-3Z" />
        <path d="M6 17H5a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-1" />
      </svg>
    </span>
    <span id="content-search" class="content-search" role="button" tabindex="0"
          aria-label="{% if _lang == 'en' %}Search{% else %}Cerca{% endif %}"
          title="{% if _lang == 'en' %}Search{% else %}Cerca{% endif %}">
      <svg class="content-search-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <circle cx="11" cy="11" r="6.5"></circle>
        <line x1="16.2" y1="16.2" x2="21" y2="21"></line>
      </svg>
    </span>
      <iframe
        id="toc-split-frame"
        src="./pr.html"
        style="width:100%; height:100%; border:none;"
      ></iframe>
    </div>
  </div>
  <script src="{{ '/static/js/toc-accordion.js' | relative_url }}" defer></script>
  <script src="{{ '/static/js/print-pageno.js' | relative_url }}" defer></script>
  <script src="{{ '/static/js/toc-history.js' | relative_url }}" defer></script>
  <script src="{{ '/static/js/search.js' | relative_url }}" defer></script>
  <div id="search-overlay" class="search-overlay screen-only" aria-hidden="true">
    <div class="search-box" role="dialog" aria-modal="true">
      <div class="search-top">
        <input id="search-input" type="text"
               placeholder="{% if _lang == 'en' %}Search the book…{% else %}Cerca nel libro…{% endif %}">
        <button id="search-close" type="button"
                aria-label="{% if _lang == 'en' %}Close{% else %}Chiudi{% endif %}">✕</button>
      </div>
      <div id="search-results" class="search-results"></div>
    </div>
  </div>
</body>
</html>
